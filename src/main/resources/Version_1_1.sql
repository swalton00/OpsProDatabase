CREATE TABLE
    OPS_DB_VERSION
(
    ID          INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    MAJOR       INTEGER NOT NULL,
    MINOR       INTEGER NOT NULL,
    TABLE_COUNT INTEGER,
    PRIMARY KEY (ID)
);

CREATE TABLE 
     CAR_TYPE
(
     ID         INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
     CAR_TYPE   VARCHAR(64) NOT NULL,
     RUN_ID     VARCHAR(16) NOT NULL,
     PRIMARY KEY (ID)
);

CREATE INDEX CAR_TYPE_SEARCH_IDX ON CAR_TYPE (RUN_ID, ID);

CREATE TABLE
     RUN_SEQ
     (
     RUN_ID VARCHAR(16) NOT NULL,
     SEQ_NUM    INTEGER NOT NULL,
     RUN_COMMENT VARCHAR(255),
     CREATED_TIME  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     UNIQUE (RUN_ID, SEQ_NUM),
     PRIMARY KEY (RUN_ID, SEQ_NUM)
     );
     
     
     ALTER TABLE CARS
     ADD COLUMN (CAR_TYPE INTEGER);
     
     ALTER TABLE CARS
     ADD CONSTRAINT CAR_TYPE_FOREIGN_KEY  
     FOREIGN KEY (CAR_TYPE) REFERENCES CAR_TYPE(ID)
     ON DELETE CASCADE ON UPDATE RESTRICT
     ;
     

INSERT INTO OPS_DB_VERSION (
        ID,
        MAJOR, 
        MINOR,
        TABLE_COUNT )
        VALUES (
        1,
        1,
        1, 
        8);


